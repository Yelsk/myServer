# 0.1版 C++ Web Server

#### **引言：**

​		本项目是在参与华为NS3联合项目期间利用空闲时间完成的，NS3的推进涉及到通信底层的很多细节，但是与自己一直以来学习的知识体系不符，于是想通过WebServer来贯穿之前所学过的知识，之前看过的《C++ Primer》、《STL源码剖析》、《深度探索C++对象模型》、《TCP\IP详解卷1》、APUE、UNP等书籍，涵盖了

- TCP/IP协议、HTTP协议
- I/O
- 多进程多线程
- 同步
- 通信
- C++语法及应用

​         通过本项目能应用这些之前学过的知识，同时由于实验室的大方向是异构网络融合，也是为以后深入探索不同通信协议下网络通信的融合作铺垫。

#### 0.1版具体功能实现：

##### Http功能：

- 请求行具体解析
- GET，POST方法响应
- 400、403、404错误码处理

##### 并发模型：

- 半同步/半反应堆线程池，固定线程数，线程数设置和CPU匹配。
- epoll多路复用，使用Edge Triggered+EPOLLONESHOT+非阻塞I/O。

##### 其他：

- list实现一个任务队列，通过信号量通知新任务的到来，工作线程通过竞争关系从任务队列获取任务并执行。
- 主线程负责等待epoll中的事件，并把到来的事件放进任务队列，每次循环的结束都会提出超时的请求或者被设置为deleted的Timer。
- 工作线程阻塞在条件变量的等待中，新任务到来后，某一工作线程会被唤醒，执行具体的IO操作和计算任务，如果需要继续监听，会添加到epoll中  。
- 互斥锁的使用：
  - 任务队列的添加和取操作，多线程共享资源需要加锁。
  - 主线程会操作定时器，工作线程在长连接中会操作定时器。

